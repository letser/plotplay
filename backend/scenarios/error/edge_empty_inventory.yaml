metadata:
  name: "Edge Case - Empty Inventory Operations"
  description: "Test game handles empty inventory and item operations gracefully"
  game: "coffeeshop_date"
  author: "PlotPlay Team"
  tags: ["phase-4", "edge-case", "inventory", "empty"]

mocks:
  writer:
    intro: "You arrive at the cozy cafe, the smell of fresh coffee filling the air."
    check: "You check your belongings."
    empty: "You don't have much with you."

  checker:
    default:
      meters: {}
      flags: {}
      character_memories: {}
      safety:
        ok: true

steps:
  - name: "Start at cafe"
    action: start
    mock_writer_key: intro
    expect:
      location: "cafe_patio"

  - name: "Check inventory"
    action: do
    action_text: "Look at what you have"
    mock_writer_key: check
    expect:
      location: "cafe_patio"

  - name: "Navigate to counter"
    action: goto
    location: "cafe_counter"
    mock_writer_key: empty
    expect:
      location: "cafe_counter"

  - name: "Continue gameplay"
    action: do
    action_text: "Browse the menu"
    mock_writer_key: intro
    expect:
      location: "cafe_counter"

  - name: "Navigate to table"
    action: goto
    location: "cafe_table"
    mock_writer_key: intro
    expect:
      location: "cafe_table"

  - name: "Verify game state stable"
    action: do
    action_text: "Take in the atmosphere"
    mock_writer_key: intro
    expect:
      location: "cafe_table"
