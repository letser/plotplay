# ===============================
# Arcs & Milestones - College Romance (v3 Spec)
# ===============================

arcs:
  - id: "player_growth"
    name: "Player Self-Improvement"
    description: "Boost your mind, body, and looks to unlock dates and deeper intimacy."
    stages:
      - id: "study_hard"
        name: "Study Hard"
        advance_when: "meters.player.mind >= 60"
        effects_on_advance:
          - { type: "flag_set", key: "midterms_over", value: true }
          - { type: "meter_change", target: "emma", meter: "trust", op: "add", value: 5 }
      - id: "workout_regime"
        name: "Workout Regime"
        advance_when: "meters.player.body >= 60"
        effects_on_advance:
          - { type: "meter_change", target: "zoe", meter: "attraction", op: "add", value: 5 }
      - id: "style_upgrade"
        name: "Style Upgrade"
        advance_when: "meters.player.looks >= 60"
        effects_on_advance:
          - { type: "meter_change", target: "emma", meter: "attraction", op: "add", value: 5 }

  - id: "emma_purity"
    name: "Emma’s Purity Path"
    character: "emma"
    category: "romance"
    stages:
      - id: "first_meet"
        name: "First Meeting"
        advance_when: "meters.emma.trust >= 20"
      - id: "study_together"
        name: "Study Together"
        advance_when: "meters.emma.trust >= 40 and meters.emma.attraction >= 30"
      - id: "first_date"
        name: "First Date"
        advance_when: "meters.emma.attraction >= 50 and gates.emma.accept_date"
        effects_on_advance:
          - type: "unlock_action"
            actions: ["deep_talk_emma"]
      - id: "first_kiss"
        name: "First Kiss"
        advance_when: "flags.emma_first_kiss == true"
      - id: "intimate_trust"
        name: "Intimate Trust"
        advance_when: "meters.emma.trust >= 80 and meters.emma.attraction >= 80"
        unlocks:
          endings: ["emma_pure"]

  - id: "emma_corruption"
    name: "Emma’s Corruption Path"
    character: "emma"
    category: "corruption"
    stages:
      - id: "temptations"
        name: "Temptations"
        advance_when: "meters.emma.corruption >= 40"
      - id: "club_outing"
        name: "Club Outing"
        advance_when: "milestone('temptations').completed and meters.emma.boldness >= 50"
      - id: "corrupted_romance"
        name: "Corrupted Romance"
        advance_when: "meters.emma.corruption >= 70 and gates.emma.accept_sex"
        unlocks:
          endings: ["emma_corrupt"]
      - id: "good_girl_gone_bad"
        name: "Good Girl Gone Bad"
        advance_when: "meters.emma.corruption >= 90"
        unlocks:
          endings: ["emma_good_girl_bad"]

  - id: "zoe_romance"
    name: "Zoe’s Romance Path"
    character: "zoe"
    category: "romance"
    stages:
      - id: "cafe_flirt"
        name: "Café Flirt"
        advance_when: "meters.zoe.attraction >= 30"
      - id: "club_dance"
        name: "Club Dance"
        advance_when: "meters.zoe.attraction >= 50 and gates.zoe.accept_kiss"
      - id: "zoe_romance_full"
        name: "Zoe’s Romance"
        advance_when: "gates.zoe.accept_sex"
        unlocks:
          endings: ["zoe_romance_ending"]