# ===============================
# Events - College Romance (v3 Spec)
# ===============================

events:
  - id: "monday_blues"
    title: "Monday Blues"
    trigger:
      conditional:
        - when: "time.weekday == 'monday' and time.slot == 'morning'"
    narrative: "It's Monday morning and everyone seems a bit sluggish..."
    effects:
      - type: meter_change
        target: "player"
        meter: "energy"
        op: "subtract"
        value: 10

  - id: "emma_text_late"
    title: "Emma’s Late-Night Text"
    category: "relationship"
    scope: "global"
    trigger:
      scheduled:
        - when: "time.slot == 'late_night' and time.day >= 2"
      conditional:
        - when: "meters.emma.attraction >= 40 and not npc_present('emma')"
    cooldown: { turns: 5 }
    narrative: |
      Your phone buzzes with a hesitant text from Emma: “Can’t sleep… thinking about you.”
    choices:
      - id: "invite_over"
        prompt: "Invite Emma over"
        conditions: "gates.emma.accept_flirting"
        effects:
          - { type: "meter_change", target: "emma", meter: "corruption", op: "add", value: 5 }
        goto: "emma_visit_night"
      - id: "reassure_sleep"
        prompt: "Tell her to rest"
        effects:
          - { type: "meter_change", target: "emma", meter: "trust", op: "add", value: 5 }

  - id: "gym_with_liam"
    title: "Workout with Liam"
    category: "friendship"
    scope: "location"
    location: "gym"
    trigger:
      location_enter: true
    narrative: |
      Liam is at the gym, waving you over enthusiastically. “Let’s pump some iron, bro.”
    choices:
      - id: "join_workout"
        prompt: "Join him"
        effects:
          - { type: "meter_change", target: "player", meter: "body", op: "add", value: 5 }
          - { type: "meter_change", target: "liam", meter: "trust", op: "add", value: 5 }
      - id: "decline"
        prompt: "Not today"
        effects:
          - { type: "meter_change", target: "liam", meter: "trust", op: "subtract", value: 2 }

  - id: "zoe_cafe_shift"
    title: "Zoe on Café Shift"
    category: "relationship"
    scope: "location"
    location: "campus_cafe"
    trigger:
      location_enter: true
    narrative: |
      Zoe spots you as she works the counter. “Sweetheart, coffee’s on me if you keep me company.”
    choices:
      - id: "chat_with_zoe"
        prompt: "Chat at the counter"
        effects:
          - { type: "meter_change", target: "zoe", meter: "attraction", op: "add", value: 5 }
      - id: "just_order"
        prompt: "Just order quickly"
        effects:
          - { type: "meter_change", target: "zoe", meter: "trust", op: "add", value: 2 }

  - id: "club_both_girls"
    title: "Emma and Zoe Together at the Club"
    category: "encounter"
    scope: "location"
    location: "night_club"
    trigger:
      conditional:
        - when: "npc_present('emma') and npc_present('zoe') and time.slot in ['night','late_night']"
    narrative: |
      The bass thunders as you notice Emma and Zoe together at the bar. Zoe grins, Emma looks flustered.
    choices:
      - id: "dance_with_both"
        prompt: "Invite them both to dance"
        conditions: "meters.zoe.attraction >= 40 and meters.emma.trust >= 40"
        effects:
          - { type: "meter_change", target: "zoe", meter: "attraction", op: "add", value: 5 }
          - { type: "meter_change", target: "emma", meter: "boldness", op: "add", value: 5 }
      - id: "focus_on_emma"
        prompt: "Focus on Emma"
        conditions: "gates.emma.accept_flirting"
        effects:
          - { type: "meter_change", target: "emma", meter: "attraction", op: "add", value: 5 }
      - id: "focus_on_zoe"
        prompt: "Focus on Zoe"
        conditions: "gates.zoe.accept_flirting"
        effects:
          - { type: "meter_change", target: "zoe", meter: "attraction", op: "add", value: 5 }

  - id: "campus_rumor"
    title: "Campus Rumor"
    category: "ambient"
    scope: "global"
    trigger:
      random:
        weight: 20
        cooldown: 10 # Cooldown in turns
    narrative: |
      As you walk through the crowded campus quad, you overhear a snippet of conversation and realize with a jolt that they're talking about you.
    effects:
      - type: "meter_change"
        target: "player"
        meter: "confidence"
        op: "subtract"
        value: 2