# ===============================
# Game Manifest (game.yaml)
# College Romance â€” PlotPlay content pack (v3 Spec)
# ===============================

meta:
  id: "college_romance"
  title: "College Romance: Emma Route"
  version: "0.1.0"
  spec_version: "3.1"
  author: "AutoGen"
  content_rating: "explicit"
  tags: ["romance", "college", "slice_of_life", "NSFW", "corruption", "training"]

# --- Starting point of the game ---
start:
  node: "intro_dorm"
  location: { zone: "campus", id: "player_room" }

# --- Default narration style ---
narration:
  pov: "second"
  tense: "present"
  paragraphs: "2-3"
  token_budget: 320
  checker_budget: 220

# --- Model cost profiles ---
model_profiles:
  writer: "cheap"
  checker: "fast"

# --- Global meters ---
meters:
  player:
    energy: { min: 0, max: 100, default: 70, visible: true, icon: "âš¡", decay_per_slot: -10 }
    money: { min: 0, max: 9999, default: 60, visible: true, icon: "ðŸ’µ", format: "currency" }
    mind: { min: 0, max: 100, default: 40, visible: true, icon: "ðŸ§ " }
    body: { min: 0, max: 100, default: 35, visible: true, icon: "ðŸ’ª" }
    looks: { min: 0, max: 100, default: 45, visible: true, icon: "âœ¨" }
    hygiene: { min: 0, max: 100, default: 60, visible: true, icon: "ðŸ§¼", decay_per_slot: -5 }

  character_template:
    trust: {
        min: 0, max: 100, default: 10,
        thresholds: { stranger: [0,19], acquaintance: [20,39], friend: [40,69], close: [70,89], intimate: [90,100] }
      }
    attraction: {
      min: 0, max: 100, default: 5,
      thresholds: { none: [0,19], interested: [20,39], attracted: [40,69], infatuated: [70,89], in_love: [90,100] }
    }
    arousal: {
      min: 0, max: 100, default: 0,
      hidden_until: "meters.{character}.attraction >= 30"
    }
    boldness: {
      min: 0, max: 100, default: 20,
      hidden_until: "meters.{character}.trust >= 40"
    }
    corruption: {
      min: 0, max: 100, default: 0
    }

# --- Meter interaction heuristics ---
meter_interactions:
  - source: "player.energy"
    target: "all.arousal"
    when: "source < 25"
    effect: "max = 60"
  - source: "player.hygiene"
    target: "npc.{any}.attraction"
    when: "source < 30"
    effect: "effective_delta_multiplier = 0.5"
  - source: "player.mind"
    target: "emma.trust"
    when: "source >= 60"
    effect: "soft_bonus = +1 on study/date scenes"
  - source: "emma.corruption"
    target: "emma.gates"
    when: "source >= 40"
    effect: "temporarily allow: ['accept_kiss','accept_oral'] (still needs privacy)"

# --- Movement Rules ---
movement:
  local:
    base_time_cost: 5 # Minutes for a standard move
    distance_modifiers:
      immediate: 0
      short: 1
      medium: 2
      long: 3
  restrictions:
    min_energy: 5 # Player can't move if energy is below this
    energy_cost_per_move: 2 # Base energy cost for any move

# --- Time system ---
time:
  mode: "hybrid" # Changed from "slots" to "hybrid"
  slots: ["morning", "noon", "afternoon", "night", "late_night"]
  actions_per_slot: 3
  auto_advance: true

  # --- New Clock Configuration for Hybrid Mode ---
  clock:
    minutes_per_day: 1440 # 24 * 60
    slot_windows:
      morning:    { start: "06:00", end: "11:59" }
      noon:       { start: "12:00", end: "13:59" }
      afternoon:  { start: "14:00", end: "17:59" }
      night:      { start: "18:00", end: "22:59" }
      late_night: { start: "23:00", end: "05:59" } # Spans across midnight

  calendar:
    epoch: "2025-09-01"
    week_days: ["monday","tuesday","wednesday","thursday","friday","saturday","sunday"]
    start_day_index: 0
    weeks_enabled: true
  start:
    day: 1
    slot: "morning"
    time: "08:30" # Add a starting HH:MM time
# --- Global action policies (UI/Writer guardrails) ---
action_filters:
  banned_topics: ["minors", "non-consensual acts", "sexualized violence"]
  banned_freeform:
    - { pattern: "drugging", reason: "not allowed in this game" }
    - { pattern: "incest",   reason: "forbidden" }

# --- List of included content files ---
includes:
  - "characters.yaml"
  - "flags.yaml"
  - "modifiers.yaml"
  - "locations.yaml"
  - "nodes.yaml"
  - "events.yaml"
  - "arcs.yaml"
  - "items.yaml"
  - "actions.yaml"